<script>
async function kitapBul() {
  const isbn = document.getElementById("isbnInput").value.trim();
  const sonuc = document.getElementById("sonuc");

  if (!isbn) {
    sonuc.innerText = "ISBN girilmedi";
    return;
  }

  sonuc.innerText = "AranÄ±yor...";

  try {
    // 1ï¸âƒ£ GOOGLE BOOKS (TÃ¼rkÃ§e filtreli)
    const googleUrl =
      "https://www.googleapis.com/books/v1/volumes?q=isbn:" +
      isbn +
      "&langRestrict=tr";

    const gRes = await fetch(googleUrl);
    const gData = await gRes.json();

    if (gData.items && gData.items.length > 0) {
      const kitapAdi = gData.items[0].volumeInfo.title;
      sonuc.innerText = "ğŸ“– " + kitapAdi;
      return;
    }

    // 2ï¸âƒ£ OPEN LIBRARY (yedek)
    const openUrl = "https://openlibrary.org/search.json?isbn=" + isbn;
    const oRes = await fetch(openUrl);
    const oData = await oRes.json();

    if (oData.docs && oData.docs.length > 0) {
      sonuc.innerText = "ğŸ“– " + oData.docs[0].title + " (dil belirsiz)";
      return;
    }

    sonuc.innerText = "Kitap bulunamadÄ±";

  } catch (e) {
    console.error(e);
    sonuc.innerText = "BaÄŸlantÄ± hatasÄ±";
  }
}
</script>
