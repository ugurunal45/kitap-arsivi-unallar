<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>ISBN â†’ Kitap AdÄ±</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      padding: 40px;
    }
    .box {
      max-width: 420px;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    input, button {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      font-size: 16px;
    }
    .sonuc {
      margin-top: 20px;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <div class="box">
    <h2>ISBN â†’ Kitap AdÄ±</h2>

    <input id="isbnInput" type="text" placeholder="ISBN gir (978...)">
    <button id="araBtn">Kitap AdÄ±nÄ± Getir</button>

    <div id="sonuc" class="sonuc"></div>
  </div>

<script>
document.getElementById("araBtn").addEventListener("click", kitapBul);

async function kitapBul() {
  const isbnInput = document.getElementById("isbnInput");
  const sonucDiv = document.getElementById("sonuc");

  if (!isbnInput || !sonucDiv) {
    alert("HTML elemanlarÄ± bulunamadÄ±");
    return;
  }

  const isbn = isbnInput.value.trim();

  if (isbn === "") {
    sonucDiv.innerText = "ISBN girilmedi";
    return;
  }

  sonucDiv.innerText = "AranÄ±yor...";

  try {
    const response = await fetch(
      "https://openlibrary.org/search.json?isbn=" + isbn
    );

    const data = await response.json();

    if (!data.docs || data.docs.length === 0) {
      sonucDiv.innerText = "Kitap bulunamadÄ±";
      return;
    }

    // TÃ¼rkÃ§e kayÄ±t varsa onu seÃ§
    let kitap = null;
    for (let i = 0; i < data.docs.length; i++) {
      if (data.docs[i].language && data.docs[i].language.includes("tur")) {
        kitap = data.docs[i];
        break;
      }
    }

    // Yoksa ilk kaydÄ± al
    if (!kitap) {
      kitap = data.docs[0];
    }

    sonucDiv.innerText = "ðŸ“– " + kitap.title;

  } catch (e) {
    console.error(e);
    sonucDiv.innerText = "BaÄŸlantÄ± hatasÄ±";
  }
}
</script>

</body>
</html>
