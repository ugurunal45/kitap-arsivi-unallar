<script>
  const DATA_URL = "https://raw.githubusercontent.com/ugurunal45/kitap-arsivi-unallar/main/data.json";

  let kitaplar = [];

  async function verileriYukle() {
    try {
      const response = await fetch(DATA_URL);
      const data = await response.json();
      kitaplar = data.kitaplar;
      listeyiGuncelle();
    } catch (err) {
      alert("Veriler yüklenemedi!");
      console.error(err);
    }
  }

  function listeyiGuncelle() {
    const ul = document.getElementById("kitapListesi");
    ul.innerHTML = "";

    kitaplar.forEach(kitap => {
      const li = document.createElement("li");
      li.textContent = `${kitap.ad} – ${kitap.yazar}`;
      ul.appendChild(li);
    });
  }

  function aramaYap() {
    const aranan = document.getElementById("arama").value.toLowerCase();
    const ul = document.getElementById("kitapListesi");
    ul.innerHTML = "";

    kitaplar
      .filter(k => k.ad.toLowerCase().includes(aranan))
      .forEach(kitap => {
        const li = document.createElement("li");
        li.textContent = `${kitap.ad} – ${kitap.yazar}`;
        ul.appendChild(li);
      });
  }

  // Sayfa açılınca verileri çek
  verileriYukle();
</script>
