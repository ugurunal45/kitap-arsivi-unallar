<script>
  const DATA_URL = "https://raw.githubusercontent.com/ugurunal45/kitap-arsivi-unallar/main/data.json";

  let kitaplar = [];

  async function verileriYukle() {
    try {
      const response = await fetch(DATA_URL);
      const data = await response.json();

      kitaplar = data.kitaplar || [];
      listeyiGuncelle();
    } catch (e) {
      document.body.innerHTML = "<h2>Veri yükleme hatası</h2><pre>" + e + "</pre>";
      console.error(e);
    }
  }

  function listeyiGuncelle() {
    const ul = document.getElementById("kitapListesi");
    ul.innerHTML = "";

    kitaplar.forEach(k => {
      const li = document.createElement("li");
      li.textContent = `${k.ad} — ${k.yazar} (ISBN: ${k.isbn})`;
      ul.appendChild(li);
    });
  }

  function aramaYap() {
    const aranan = document.getElementById("arama").value.toLowerCase();
    const ul = document.getElementById("kitapListesi");
    ul.innerHTML = "";

    kitaplar
      .filter(k => k.ad.toLowerCase().includes(aranan))
      .forEach(k => {
        const li = document.createElement("li");
        li.textContent = `${k.ad} — ${k.yazar} (ISBN: ${k.isbn})`;
        ul.appendChild(li);
      });
  }

  verileriYukle();
</script>
